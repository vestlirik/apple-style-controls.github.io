function hideEditMenu(){menu.style.display="none",removePageClickEvent()}function removePageClickEvent(){document.getElementsByTagName("html")[0].removeEventListener("click",hideEditMenu)}function editMenuClick(a,b){removePageClickEvent(),menu.style.display="flex";var c=(b||a.target).getBoundingClientRect().top-menu.clientHeight-10;menu.style.top=c+"px";var d=a.clientX-menu.clientWidth/2;d<10&&(d=10),d+menu.clientWidth>screen.availWidth&&(d=screen.availWidth-menu.clientWidth-20),menu.style.left=d+"px";var e=(a.clientX||0)-menu.offsetLeft-5;e<5?e=5:e+10+14>=menu.clientWidth&&(e=menu.clientWidth-10-14),addStyleToHead("div.asc-edit-menu:after{left: "+e+"px;}"),setTimeout(function(){document.getElementsByTagName("html")[0].addEventListener("click",hideEditMenu)},0)}function checkSelectedText(a){var b=document.all?document.selection.createRange().text:document.getSelection();if(b.toString().length>0){var c=b.baseNode.parentElement;c.classList.contains("asc-selectable-text")&&editMenuClick(a,c)}else hideEditMenu(a)}function addStyleToHead(a){var b=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),b.appendChild(c)}function assignMenuToButton(a){a.addEventListener("click",editMenuClick)}function assignEditMenu(a){menu=a}function applyDetectingSelectedText(){document.onmouseup=function(a){a.target.classList.contains("asc-edit-menu-button")||setTimeout(function(){checkSelectedText(a)},0)}}function applyActivityIndicator(a){addBars(a)}function addBars(a){for(var b=document.createDocumentFragment(),c=0;c<12;c++){var d=document.createElement("div");d.classList.add("bar"+c),b.appendChild(d)}a.appendChild(b)}function initializeSegmentsBar(a){function b(){for(var a=0;a<g.length;a++)g[a].classList.remove("active"),d.childNodes[a].classList.remove("active")}function c(a){b(),d.childNodes[a].classList.add("active"),g[a].classList.add("active")}for(var d,e,f=[],g=[],h=0;h<a.children.length;h++)a.children[h].classList.contains("asc-segmented-control")&&g.push(a.children[h]);if(0!==g.length){for(var i=0;i<g.length;i++)f.push(g[i].getAttribute("data-label")),g[i].classList.contains("active")&&(e=i);d=document.createElement("div"),d.classList.add("asc-segmented-bar"),f.forEach(function(a,b){var e=document.createElement("li");e.innerText=a,e.addEventListener("click",function(a){c(b)}),d.appendChild(e)}),void 0===e&&(e=0),function(){a.insertBefore(d,g[0])}(),c(e)}}function assignEraser(a){a.addEventListener("mousedown",eraseContent)}function eraseContent(a){a.target.previousElementSibling.value="",setTimeout(function(){a.target.previousElementSibling.focus()},0)}function applyInput(a){var b=document.createElement("label");b.classList.add("asc"),b.classList.add("asc-eraser"),a.parentNode.insertBefore(b,a.nextSibling);var c=a.attributes.icon;if(c){var d=document.createElement("span");d.classList.add("fa"),d.classList.add(c.value),d.style.position="absolute",d.style.marginTop="10px",d.style.color="#B3B3B3",a.style.paddingLeft="20px",a.parentNode.insertBefore(d,a)}}function applySearchInput(a){a.addEventListener("focus",function(a){a.currentTarget.parentNode.classList.add("asc-clicked")}),a.addEventListener("blur",function(a){a.currentTarget.parentNode.classList.remove("asc-clicked")})}function initializeTabBar(a){function b(){for(var a=f,b=0;b<a.length;b++)a[b].classList.remove("active"),tabBar.childNodes[b].classList.remove("active")}function c(a){var c=f;b(),tabBar.childNodes[a].classList.add("active"),c[a].classList.add("active")}for(var d,e=[],f=[],g=0;g<a.children.length;g++)a.children[g].classList.contains("asc-tab")&&f.push(a.children[g]);for(var h=0;h<f.length;h++){"ASC-LABEL"===f[h].children[0].tagName?(e.push(f[h].children[0]),f[h].classList.contains("active")&&(d=h)):console.error("<asc-label> should be present in <asc-tab> on the first place")}tabBar=document.createElement("div"),tabBar.classList.add("asc-tab-bar"),e.forEach(function(a,b){a.addEventListener("click",function(a){c(b)}),tabBar.appendChild(a)}),void 0===d&&(d=0),function(){a.appendChild(tabBar)}(),c(d)}function applyToolbar(a){var b=document.querySelector("button[data-id="+a.id+"]");b&&function(a){var c=-a.offsetHeight+"px";a.style.bottom=c,b.addEventListener("click",function(){var b=document.createElement("asc-backdrop");setTimeout(function(){var d=function(){a.style.bottom=c,b.remove(),document.body.removeEventListener("click",d)};document.body.addEventListener("click",d)},0),document.body.appendChild(b),setTimeout(function(){a.style.bottom="0"},0)})}(a)}function applyActionSheet(a){var b=document.querySelector("button[data-id="+a.id+"]");b&&function(a){for(var c=document.createElement("action-block");a.children[0];)c.appendChild(a.children[0]);a.appendChild(c);var d=document.createElement("action-block");d.classList.add("cancel-block");var e=document.createElement("action");e.innerText="Cancel",d.appendChild(e),a.appendChild(d);var f=-a.offsetHeight+"px";a.style.bottom=f,b.addEventListener("click",function(){var b=document.createElement("asc-backdrop");setTimeout(function(){var c=function(){a.style.bottom=f,b.remove(),document.body.removeEventListener("click",c)};document.body.addEventListener("click",c)},0),document.body.appendChild(b),setTimeout(function(){a.style.bottom="15px"},0)})}(a)}function showAlert(a,b,c,d){var e=document.createElement("asc-dialog");e.id="sample-alert";var f=document.createElement("asc-dialog-header");f.innerText=a;var g=document.createElement("asc-dialog-text");g.innerText=b;var h=document.createElement("asc-content");h.appendChild(f),h.appendChild(g);var i=document.createElement("asc-action-button");i.innerText=c;var j=document.createAttribute("resolve");i.attributes.setNamedItem(j);var k=document.createElement("asc-action-button");k.innerText=d;var l=document.createAttribute("reject");k.attributes.setNamedItem(l);var m=document.createElement("asc-actions");m.appendChild(k),m.appendChild(i),e.appendChild(h),e.appendChild(m),document.body.appendChild(e);var n=function(){e.remove()};return showDialog(e.id,n,n)}function showDialog(a,b,c,d){var e=document.getElementById(a),f=document.createAttribute("shown");return e.attributes.setNamedItem(f),new Promise(function(a,f){e.addEventListener("click",function(a){"ASC-ACTION-BUTTON"!==a.target.tagName&&a.stopImmediatePropagation()});for(var g=function(){e.removeAttribute("shown"),j.remove(),document.body.classList.remove("no-scroll"),document.body.removeEventListener("click",h)},h=function(){f(),c&&c(),g()},i=0;i<e.children.length;i++)"ASC-ACTIONS"===e.children[i].tagName&&function(d){for(var h=e.children[d].children,i=0;i<h.length;i++)!function(d){h[d].hasAttribute("reject")&&h[d].addEventListener("click",function(){f(),c&&c(),g()}),h[d].hasAttribute("resolve")&&h[d].addEventListener("click",function(){var c;if(h[d].hasAttribute("return-value-id")){var e=h[d].getAttribute("return-value-id"),f=document.getElementById(e);if(f){var i=f.value;void 0!==i&&(c=i)}}a(c),b&&b(),g()})}(i)}(i);setTimeout(function(){document.body.addEventListener("click",h)},0);var j=document.createElement("asc-backdrop");document.body.appendChild(j),document.body.classList.add("no-scroll"),d&&setTimeout(d,50)})}function ColorPicker(a,b,c,d,e){function f(a){var b=this.getBoundingClientRect().left,c=this.getBoundingClientRect().top;if(!(a.clientX<b||a.clientY<c||a.clientY>b+300||a.clientY>c+50)){var d=a.clientX-b,e=a.clientY-c,f=g.lineCanvas.getContext("2d").getImageData(d,e,1,1).data;g.fillSelector(f[0],f[1],f[2])}}this.element=a,this.init=function(){console.time("creating color picker");var d=this.element.offsetWidth,e=document.createElement("canvas");e.height=d,e.width=d,this.canvas=e;var f=document.createElement("canvas");f.height=b.offsetHeight,f.width=b.offsetWidth,this.lineCanvas=f,b.appendChild(this.lineCanvas);var g=document.createElement("canvas");g.height=c.offsetHeight,g.width=c.offsetWidth,this.selectorCanvas=g,c.appendChild(this.selectorCanvas),this.renderColorMap(),a.appendChild(e),this.setupBindings()},this.finish=function(){console.timeEnd("creating color picker"),document.getElementById("color-loader").remove(),this.lineCanvas.parentElement.children[0].style.display="",document.getElementById("color-hr").style.display="block",document.getElementsByClassName("color-selector-line")[0].style.display="block";for(var a=document.getElementsByClassName("rgb-input-block"),b=0;b<a.length;b++)a[b].style.display="flex";this.fillColorLine(255,255,255)},this.renderColorMap=function(){var a=this.canvas,b=a.getContext("2d"),c=a.width/2,d=2*Math.PI/360,e=1/c;b.clearRect(0,0,a.width,a.height);for(var f=cy=c,g=0;g<360;g+=e){var h=g*d,i=c*Math.cos(h),j=c*Math.sin(h);b.strokeStyle="hsl("+g+", 100%, 50%)",b.beginPath(),b.moveTo(c,c),b.lineTo(f+i,cy+j),b.stroke()}var k=b.createRadialGradient(f,cy,0,f,f,c);k.addColorStop(0,"white"),k.addColorStop(1,"rgba(255, 255, 255, 0)"),b.fillStyle=k,b.beginPath(),b.arc(f,cy,c,0,2*Math.PI,!0),b.closePath(),b.fill()},this.fillColorLine=function(a,b,c){var d=this.lineCanvas.getContext("2d"),e=d.createLinearGradient(0,0,this.lineCanvas.offsetWidth,0);e.addColorStop(0,"rgb("+a+" ,"+b+" ,"+c+")"),e.addColorStop(1,"rgb(0, 0, 0)"),d.fillStyle=e,d.fillRect(0,0,this.lineCanvas.offsetWidth,this.lineCanvas.offsetHeight),this.element.nextElementSibling.children[0].style.marginLeft=0,this.fillSelector(a,b,c)};var g=this;this.setupBindings=function(){var a=this.canvas,b=a.getContext("2d"),c=this;a.addEventListener("click",function(a){var d=a.offsetX||a.clientX-this.offsetLeft,e=a.offsetY||a.clientY-this.offsetTop,f=b.getImageData(d,e,1,1).data;0===f[0]&&0===f[1]&&0===f[2]||c.fillColorLine(f[0],f[1],f[2])}),c.lineCanvas.addEventListener("click",f)},this.fillSelector=function(a,b,c){var f=this.selectorCanvas.getContext("2d");d.value=a+", "+b+", "+c,e.value="#"+rgbToHex(a)+rgbToHex(b)+rgbToHex(c);var g="rgb("+d.value+")";f.fillStyle=g,f.fillRect(0,0,this.selectorCanvas.offsetWidth,this.selectorCanvas.offsetHeight),document.getElementById("selected-color-div").value=g},this.init(),this.finish()}function rgbToHex(a){var b=a.toString(16);return 1===b.length?"0"+b:b}function showColorPicker(a,b){function c(){return c.cached||(c.cached=document.getElementsByClassName("color-line")[0].getBoundingClientRect()),c.cached}function d(a){var b=a.x-c().left;b>=0&&b<=300&&(l.style.marginLeft=b+"px");var d=new Event("click");d.clientX=a.clientX,d.clientY=a.clientY,k.children[1].dispatchEvent(d)}a=a||"OK",b=b||"Cancel";var e=document.createElement("asc-dialog");e.id="sample-color-picker";var f=document.createElement("asc-dialog-header");f.innerText="Color picker";var g=document.createElement("div");g.id="color-loader",g.classList.add("asc"),g.classList.add("asc-activity-indicator"),g.classList.add("absolute-center");var h=document.createElement("asc-content");h.appendChild(f);var i=document.createElement("asc-actions");e.appendChild(h),e.appendChild(i),document.body.appendChild(e),h.appendChild(g);var j=document.createElement("div");j.classList.add("color-circle"),h.appendChild(j);var k=document.createElement("div");k.classList.add("color-line"),h.appendChild(k),k.addEventListener("click",d);var l=document.createElement("div");l.classList.add("color-selector-line"),k.appendChild(l),l.addEventListener("mousedown",function(a){document.body.addEventListener("mouseup",function(a){console.log("mouseup"),k.removeAttribute("fill-on-move"),document.body.removeEventListener("mousemove",d)}),console.log("mousedown"),k.setAttribute("fill-on-move",""),document.body.addEventListener("mousemove",d)});var m=document.createElement("hr");m.id="color-hr",h.appendChild(m);var n=document.createElement("div");n.classList.add("selected-color-details");var o=document.createElement("div");o.classList.add("color-selector"),n.appendChild(o);var p=document.createElement("div");p.classList.add("detail-inputs-block"),n.appendChild(p);var q=document.createElement("div");q.classList.add("rgb-input-block"),p.appendChild(q);var r=document.createElement("div");r.classList.add("rgb-input-label"),r.innerHTML="RGB: ",q.appendChild(r);var s=document.createElement("input");s.setAttribute("readonly",""),s.classList.add("asc"),s.value="0, 0, 0",q.appendChild(s);var t=document.createElement("button");t.classList.add("asc"),t.classList.add("asc-icon-button");var u=document.createElement("span");u.classList.add("fa"),u.classList.add("fa-copy"),t.appendChild(u),t.addEventListener("click",function(){s.select(),document.execCommand("copy"),s.selectionStart=s.selectionEnd}),q.appendChild(t);var v=document.createElement("div");v.classList.add("rgb-input-block"),p.appendChild(v);var w=document.createElement("div");w.classList.add("rgb-input-label"),w.innerHTML="Hex: ",v.appendChild(w);var x=document.createElement("input");x.setAttribute("readonly",""),x.classList.add("asc"),x.value="#000000",v.appendChild(x);var y=document.createElement("button");y.classList.add("asc"),y.classList.add("asc-icon-button");var z=document.createElement("span");z.classList.add("fa"),z.classList.add("fa-copy"),y.appendChild(z),y.addEventListener("click",function(){x.select(),document.execCommand("copy"),x.selectionStart=x.selectionEnd}),v.appendChild(y),h.appendChild(n);var A=document.createElement("input");A.setAttribute("hidden",""),A.id="selected-color-div",h.appendChild(A);var B=document.createElement("asc-action-button");B.innerText=a,B.setAttribute("resolve",""),B.setAttribute("return-value-id",A.id);var C=document.createElement("asc-action-button");C.innerText=b,C.setAttribute("reject",""),i.appendChild(C),i.appendChild(B);var D=function(){e.remove()};return showDialog(e.id,D,D,function(){new ColorPicker(j,k,o,s,x)})}function appendStyle(){var a=document.createElement("style");a.innerHTML+=".color-selector-line::before {content: '';\nposition: absolute;\nwidth: 0;\nheight: 0;\ntop: -7px;\nleft: -5px;\nborder-style: solid;\nborder-width: 7px 5px 0 5px;\nborder-color: #9e9e9e transparent transparent transparent;}",a.innerHTML+=".color-selector-line::after {content: '';\nposition: absolute;\nwidth: 0;\nheight: 0;\nbottom: -7px;\nleft: -5px;\nborder-style: solid;\nborder-width: 0 5px 7px 5px;\nborder-color: transparent transparent #9e9e9e transparent;}",a.innerHTML+=".color-circle {width: 300px;\ncursor: crosshair;\n}",a.innerHTML+=".color-line {width: 300px;\nheight: 50px;\ncursor: crosshair;\nposition: relative;\n}",a.innerHTML+=".color-line[fill-on-move] {cursor: pointer;\n}",a.innerHTML+=".color-selector-line {display: none;\nposition: absolute;\nwidth: 5px;\nheight: 50px;\ncursor: pointer;\nbackground: transparent;\nborder-left: 1px solid #fff;\n}",a.innerHTML+="#color-hr {height: 2px;\nwidth: 100%;\nborder: none;\nborder-top: 1px solid #949494;\ndisplay: none;\n}",a.innerHTML+=".selected-color-details {display: flex;\nalign-items: center;\n}",a.innerHTML+=".color-selector {height: 50px;\nwidth: 50px;\n}",a.innerHTML+=".detail-inputs-block {display: flex;\nflex: 1;\nflex-direction: column;\n}",a.innerHTML+=".rgb-input-block {display: none;\nalign-items: center;\n}",a.innerHTML+=".rgb-input-label {padding: 5px;\nflex: 1;\n}",a.innerHTML+=".color-circle canvas, .color-line canvas, .color-selector canvas {user-select: none;\n}",document.head.appendChild(a)}var menu,tabBar;appendStyle();