function hideEditMenu(a){document.getElementById("asc-edit-menu").style.display="none",removePageClickEvent()}function removePageClickEvent(){document.getElementsByTagName("html")[0].removeEventListener("click",hideEditMenu)}function editMenuClick(a,b){removePageClickEvent();var c=document.getElementById("asc-edit-menu");c.style.display="flex";var d=(b||a.target).getBoundingClientRect().top-c.clientHeight-10;c.style.top=d+"px";var e=a.clientX-c.clientWidth/2;e<10&&(e=10),e+c.clientWidth>screen.availWidth&&(e=screen.availWidth-c.clientWidth-20),c.style.left=e+"px";var f=(a.clientX||0)-c.offsetLeft-5;f<5?f=5:f+10+14>=c.clientWidth&&(f=c.clientWidth-10-14),addStyleToHead("div.asc-edit-menu:after{left: "+f+"px;}"),setTimeout(function(){document.getElementsByTagName("html")[0].addEventListener("click",hideEditMenu)},0)}function checkSelectedText(a){var b=document.all?document.selection.createRange().text:document.getSelection();if(b.toString().length>0){var c=b.baseNode.parentElement;c.classList.contains("asc-selectable-text")&&editMenuClick(a,c)}else hideEditMenu(a)}function addStyleToHead(a){var b=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),b.appendChild(c)}function assignMenuToButtons(){for(var a=document.getElementsByClassName("asc-edit-menu-button"),b=0;b<a.length;b++)a[b].addEventListener("click",editMenuClick)}function applyTextSelecting(){document.getElementsByClassName("asc-selectable-text").length>0&&applyDetectingSelectedText()}function applyDetectingSelectedText(){document.onmouseup=function(a){a.target.classList.contains("asc-edit-menu-button")||setTimeout(function(){checkSelectedText(a)},0)}}function applyActivityIndicators(){for(var a=document.getElementsByClassName("asc-activity-indicator"),b=0;b<a.length;b++)addBars(a[b])}function addBars(a){for(var b=document.createDocumentFragment(),c=0;c<12;c++){var d=document.createElement("div");d.classList.add("bar"+c),b.appendChild(d)}a.appendChild(b)}function getSegmentedControls(){if(!getSegmentedControls.cached){var a=document.getElementsByClassName("asc-segmented-control");getSegmentedControls.cached=a}return getSegmentedControls.cached}function initializeSegmentsBar(){for(var a,b=[],c=getSegmentedControls(),d=0;d<c.length;d++)b.push(c[d].getAttribute("data-label")),c[d].classList.contains("active")&&(a=d);segmentsBar=document.createElement("div"),segmentsBar.classList.add("asc-segmented-bar"),b.forEach(function(a,b){var c=document.createElement("li");c.innerText=a,c.addEventListener("click",function(a){segmentClick(b)}),segmentsBar.appendChild(c)}),void 0===a&&(a=0),applySegmentedBar(),segmentClick(a)}function cleanActiveSegments(){for(var a=getSegmentedControls(),b=0;b<a.length;b++)a[b].classList.remove("active"),segmentsBar.childNodes[b].classList.remove("active")}function segmentClick(a){var b=getSegmentedControls();cleanActiveSegments(),segmentsBar.childNodes[a].classList.add("active"),b[a].classList.add("active")}function applySegmentedBar(){var a=getSegmentedControls();document.getElementsByClassName("asc-segmented-controls")[0].insertBefore(segmentsBar,a[0])}function assignErasers(){for(var a=document.getElementsByClassName("asc-eraser"),b=0;b<a.length;b++)a[b].addEventListener("mousedown",eraseContent)}function eraseContent(a){a.target.previousElementSibling.value="",setTimeout(function(){a.target.previousElementSibling.focus()},0)}function applyIcons(){for(var a=document.getElementsByTagName("input"),b=0;b<a.length;b++){var c=a[b].attributes.icon;if(c){var d=document.createElement("span");d.classList.add("fa"),d.classList.add(c.value),d.style.position="absolute",d.style.marginTop="10px",d.style.color="#B3B3B3",a[b].style.paddingLeft="20px",a[b].parentNode.insertBefore(d,a[b])}}}function getTabContents(){if(!getTabContents.cached){var a=document.getElementsByClassName("asc-tab");getTabContents.cached=a}return getTabContents.cached}function initializeTabBar(){for(var a,b=[],c=getTabContents(),d=0;d<c.length;d++){"ASC-LABEL"===c[d].children[0].tagName?(b.push(c[d].children[0]),c[d].classList.contains("active")&&(a=d)):console.error("<asc-label> should be present in <asc-tab> on the first place")}tabBar=document.createElement("div"),tabBar.classList.add("asc-tab-bar"),b.forEach(function(a,b){a.addEventListener("click",function(a){tabClick(b)}),tabBar.appendChild(a)}),void 0===a&&(a=0),applyTabBar(),tabClick(a)}function cleanActiveTab(){for(var a=getTabContents(),b=0;b<a.length;b++)a[b].classList.remove("active"),tabBar.childNodes[b].classList.remove("active")}function tabClick(a){var b=getTabContents();cleanActiveTab(),tabBar.childNodes[a].classList.add("active"),b[a].classList.add("active")}function applyTabBar(){document.getElementsByClassName("asc-tab-bar-container")[0].appendChild(tabBar)}function showAlert(a,b,c,d){var e=document.createElement("asc-dialog");e.id="sample-alert";var f=document.createElement("asc-dialog-header");f.innerText=a;var g=document.createElement("asc-dialog-text");g.innerText=b;var h=document.createElement("asc-content");h.appendChild(f),h.appendChild(g);var i=document.createElement("asc-action-button");i.innerText=c;var j=document.createAttribute("resolve");i.attributes.setNamedItem(j);var k=document.createElement("asc-action-button");k.innerText=d;var l=document.createAttribute("reject");k.attributes.setNamedItem(l);var m=document.createElement("asc-actions");m.appendChild(k),m.appendChild(i),e.appendChild(h),e.appendChild(m),document.body.appendChild(e);var n=function(){e.remove()};return showDialog(e.id,n,n)}function showDialog(a,b,c,d){var e=document.getElementById(a),f=document.createAttribute("shown");return e.attributes.setNamedItem(f),new Promise(function(a,f){e.addEventListener("click",function(a){"ASC-ACTION-BUTTON"!==a.target.tagName&&a.stopImmediatePropagation()});for(var g=function(){e.removeAttribute("shown"),j.remove(),document.body.classList.remove("no-scroll"),document.body.removeEventListener("click",h)},h=function(){f(),c&&c(),g()},i=0;i<e.children.length;i++)"ASC-ACTIONS"===e.children[i].tagName&&function(d){for(var h=e.children[d].children,i=0;i<h.length;i++)!function(d){h[d].hasAttribute("reject")&&h[d].addEventListener("click",function(){f(),c&&c(),g()}),h[d].hasAttribute("resolve")&&h[d].addEventListener("click",function(){var c;if(h[d].hasAttribute("return-value-id")){var e=h[d].getAttribute("return-value-id"),f=document.getElementById(e);if(f){var i=f.value;void 0!==i&&(c=i)}}a(c),b&&b(),g()})}(i)}(i);setTimeout(function(){document.body.addEventListener("click",h)},0);var j=document.createElement("asc-backdrop");document.body.appendChild(j),document.body.classList.add("no-scroll"),d&&setTimeout(d,50)})}function ColorPicker(a,b,c,d,e){function f(a){var b=this.getBoundingClientRect().left,c=this.getBoundingClientRect().top;if(!(a.clientX<b||a.clientY<c||a.clientY>b+300||a.clientY>c+50)){var d=a.clientX-b,e=a.clientY-c,f=g.lineCanvas.getContext("2d").getImageData(d,e,1,1).data;g.fillSelector(f[0],f[1],f[2])}}this.element=a,this.init=function(){console.time("creating color picker");var d=this.element.offsetWidth,e=document.createElement("canvas");e.height=d,e.width=d,this.canvas=e;var f=document.createElement("canvas");f.height=b.offsetHeight,f.width=b.offsetWidth,this.lineCanvas=f,b.appendChild(this.lineCanvas);var g=document.createElement("canvas");g.height=c.offsetHeight,g.width=c.offsetWidth,this.selectorCanvas=g,c.appendChild(this.selectorCanvas),this.renderColorMap(),a.appendChild(e),this.setupBindings()},this.finish=function(){console.timeEnd("creating color picker"),document.getElementById("color-loader").remove(),this.lineCanvas.parentElement.children[0].style.display="",document.getElementById("color-hr").style.display="block",document.getElementsByClassName("color-selector-line")[0].style.display="block";for(var a=document.getElementsByClassName("rgb-input-block"),b=0;b<a.length;b++)a[b].style.display="flex";this.fillColorLine(255,255,255)},this.renderColorMap=function(){var a=this.canvas,b=a.getContext("2d"),c=a.width/2,d=2*Math.PI/360,e=1/c;b.clearRect(0,0,a.width,a.height);for(var f=cy=c,g=0;g<360;g+=e){var h=g*d,i=c*Math.cos(h),j=c*Math.sin(h);b.strokeStyle="hsl("+g+", 100%, 50%)",b.beginPath(),b.moveTo(c,c),b.lineTo(f+i,cy+j),b.stroke()}var k=b.createRadialGradient(f,cy,0,f,f,c);k.addColorStop(0,"white"),k.addColorStop(1,"rgba(255, 255, 255, 0)"),b.fillStyle=k,b.beginPath(),b.arc(f,cy,c,0,2*Math.PI,!0),b.closePath(),b.fill()},this.fillColorLine=function(a,b,c){var d=this.lineCanvas.getContext("2d"),e=d.createLinearGradient(0,0,this.lineCanvas.offsetWidth,0);e.addColorStop(0,"rgb("+a+" ,"+b+" ,"+c+")"),e.addColorStop(1,"rgb(0, 0, 0)"),d.fillStyle=e,d.fillRect(0,0,this.lineCanvas.offsetWidth,this.lineCanvas.offsetHeight),this.element.nextElementSibling.children[0].style.marginLeft=0,this.fillSelector(a,b,c)};var g=this;this.setupBindings=function(){var a=this.canvas,b=a.getContext("2d"),c=this;a.addEventListener("click",function(a){var d=a.offsetX||a.clientX-this.offsetLeft,e=a.offsetY||a.clientY-this.offsetTop,f=b.getImageData(d,e,1,1).data;0===f[0]&&0===f[1]&&0===f[2]||c.fillColorLine(f[0],f[1],f[2])}),c.lineCanvas.addEventListener("click",f)},this.fillSelector=function(a,b,c){var f=this.selectorCanvas.getContext("2d");d.value=a+", "+b+", "+c,e.value="#"+rgbToHex(a)+rgbToHex(b)+rgbToHex(c);var g="rgb("+d.value+")";f.fillStyle=g,f.fillRect(0,0,this.selectorCanvas.offsetWidth,this.selectorCanvas.offsetHeight),document.getElementById("selected-color-div").value=g},this.init(),this.finish()}function rgbToHex(a){var b=a.toString(16);return 1===b.length?"0"+b:b}function showColorPicker(a,b){function c(){return c.cached||(c.cached=document.getElementsByClassName("color-line")[0].getBoundingClientRect()),c.cached}function d(a){var b=a.x-c().left;b>=0&&b<=300&&(k.style.marginLeft=b+"px");var d=new Event("click");d.clientX=a.clientX,d.clientY=a.clientY,j.children[1].dispatchEvent(d)}a=a||"OK",b=b||"Cancel";var e=document.createElement("asc-dialog");e.id="sample-color-picker";var f=document.createElement("asc-dialog-header");f.innerText="Color picker";var g=document.createElement("div");g.id="color-loader",g.classList.add("asc"),g.classList.add("asc-activity-indicator"),g.classList.add("absolute-center");var h=document.createElement("asc-content");h.appendChild(f),h.appendChild(g);var i=document.createElement("div");i.classList.add("color-circle"),h.appendChild(i);var j=document.createElement("div");j.classList.add("color-line"),h.appendChild(j),j.addEventListener("click",d);var k=document.createElement("div");k.classList.add("color-selector-line"),j.appendChild(k),k.addEventListener("mousedown",function(a){document.body.addEventListener("mouseup",function(a){console.log("mouseup"),j.removeAttribute("fill-on-move"),document.body.removeEventListener("mousemove",d)}),console.log("mousedown"),j.setAttribute("fill-on-move",""),document.body.addEventListener("mousemove",d)});var l=document.createElement("hr");l.id="color-hr",h.appendChild(l);var m=document.createElement("div");m.classList.add("selected-color-details");var n=document.createElement("div");n.classList.add("color-selector"),m.appendChild(n);var o=document.createElement("div");o.classList.add("detail-inputs-block"),m.appendChild(o);var p=document.createElement("div");p.classList.add("rgb-input-block"),o.appendChild(p);var q=document.createElement("div");q.classList.add("rgb-input-label"),q.innerHTML="RGB: ",p.appendChild(q);var r=document.createElement("input");r.setAttribute("readonly",""),r.classList.add("asc"),r.value="0, 0, 0",p.appendChild(r);var s=document.createElement("button");s.classList.add("asc"),s.classList.add("asc-icon-button");var t=document.createElement("span");t.classList.add("fa"),t.classList.add("fa-copy"),s.appendChild(t),s.addEventListener("click",function(){r.select(),document.execCommand("copy"),r.selectionStart=r.selectionEnd}),p.appendChild(s);var u=document.createElement("div");u.classList.add("rgb-input-block"),o.appendChild(u);var v=document.createElement("div");v.classList.add("rgb-input-label"),v.innerHTML="Hex: ",u.appendChild(v);var w=document.createElement("input");w.setAttribute("readonly",""),w.classList.add("asc"),w.value="#000000",u.appendChild(w);var x=document.createElement("button");x.classList.add("asc"),x.classList.add("asc-icon-button");var y=document.createElement("span");y.classList.add("fa"),y.classList.add("fa-copy"),x.appendChild(y),x.addEventListener("click",function(){w.select(),document.execCommand("copy"),w.selectionStart=w.selectionEnd}),u.appendChild(x),h.appendChild(m);var z=document.createElement("input");z.setAttribute("hidden",""),z.id="selected-color-div",h.appendChild(z);var A=document.createElement("asc-action-button");A.innerText=a,A.setAttribute("resolve",""),A.setAttribute("return-value-id",z.id);var B=document.createElement("asc-action-button");B.innerText=b,B.setAttribute("reject","");var C=document.createElement("asc-actions");C.appendChild(B),C.appendChild(A),e.appendChild(h),e.appendChild(C),document.body.appendChild(e),applyActivityIndicators();var D=function(){e.remove()};return showDialog(e.id,D,D,function(){new ColorPicker(i,j,n,r,w)})}function appendStyle(){var a=document.createElement("style");a.innerHTML+=".color-selector-line::before {content: '';\nposition: absolute;\nwidth: 0;\nheight: 0;\ntop: -7px;\nleft: -5px;\nborder-style: solid;\nborder-width: 7px 5px 0 5px;\nborder-color: #9e9e9e transparent transparent transparent;}",a.innerHTML+=".color-selector-line::after {content: '';\nposition: absolute;\nwidth: 0;\nheight: 0;\nbottom: -7px;\nleft: -5px;\nborder-style: solid;\nborder-width: 0 5px 7px 5px;\nborder-color: transparent transparent #9e9e9e transparent;}",a.innerHTML+=".color-circle {width: 300px;\ncursor: crosshair;\n}",a.innerHTML+=".color-line {width: 300px;\nheight: 50px;\ncursor: crosshair;\nposition: relative;\n}",a.innerHTML+=".color-line[fill-on-move] {cursor: pointer;\n}",a.innerHTML+=".color-selector-line {display: none;\nposition: absolute;\nwidth: 5px;\nheight: 50px;\ncursor: pointer;\nbackground: transparent;\nborder-left: 1px solid #fff;\n}",a.innerHTML+="#color-hr {height: 2px;\nwidth: 100%;\nborder: none;\nborder-top: 1px solid #949494;\ndisplay: none;\n}",a.innerHTML+=".selected-color-details {display: flex;\nalign-items: center;\n}",a.innerHTML+=".color-selector {height: 50px;\nwidth: 50px;\n}",a.innerHTML+=".detail-inputs-block {display: flex;\nflex: 1;\nflex-direction: column;\n}",a.innerHTML+=".rgb-input-block {display: none;\nalign-items: center;\n}",a.innerHTML+=".rgb-input-label {padding: 5px;\nflex: 1;\n}",a.innerHTML+=".color-circle canvas, .color-line canvas, .color-selector canvas {user-select: none;\n}",document.body.appendChild(a)}hideEditMenu(),assignMenuToButtons(),applyTextSelecting(),applyActivityIndicators();var segmentsBar;initializeSegmentsBar(),assignErasers(),applyIcons();for(var searchInputs=document.getElementsByClassName("asc-search-input"),i=0;i<searchInputs.length;i++)searchInputs[i].addEventListener("focus",function(a){a.currentTarget.parentNode.classList.add("asc-clicked")}),searchInputs[i].addEventListener("blur",function(a){a.currentTarget.parentNode.classList.remove("asc-clicked")});var tabBar;initializeTabBar();for(var toolbars=document.getElementsByTagName("asc-toolbar"),i=0;i<toolbars.length;i++){var button=document.querySelector("button[data-id="+toolbars[i].id+"]");button&&function(a){var b=-a.offsetHeight+"px";a.style.bottom=b,button.addEventListener("click",function(){var c=document.createElement("asc-backdrop");setTimeout(function(){var d=function(){a.style.bottom=b,c.remove(),document.body.removeEventListener("click",d)};document.body.addEventListener("click",d)},0),document.body.appendChild(c),setTimeout(function(){a.style.bottom="0"},0)})}(toolbars[i])}for(var actionSheets=document.getElementsByTagName("asc-action-sheet"),i=0;i<actionSheets.length;i++){var button=document.querySelector("button[data-id="+actionSheets[i].id+"]");button&&function(a){for(var b=document.createElement("action-block");a.children[0];)b.appendChild(a.children[0]);a.appendChild(b);var c=document.createElement("action-block");c.classList.add("cancel-block");var d=document.createElement("action");d.innerText="Cancel",c.appendChild(d),a.appendChild(c);var e=-a.offsetHeight+"px";a.style.bottom=e,button.addEventListener("click",function(){var b=document.createElement("asc-backdrop");setTimeout(function(){var c=function(){a.style.bottom=e,b.remove(),document.body.removeEventListener("click",c)};document.body.addEventListener("click",c)},0),document.body.appendChild(b),setTimeout(function(){a.style.bottom="15px"},0)})}(actionSheets[i])}appendStyle();