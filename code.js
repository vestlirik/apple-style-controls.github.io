function hideEditMenu(a){document.getElementById("asc-edit-menu").style.display="none",removePageClickEvent()}function removePageClickEvent(){document.getElementsByTagName("html")[0].removeEventListener("click",hideEditMenu)}function editMenuClick(a,b){removePageClickEvent();var c=document.getElementById("asc-edit-menu");c.style.display="flex";var d=(b||a.target).getBoundingClientRect().top-c.clientHeight-10;c.style.top=d+"px";var e=a.clientX-c.clientWidth/2;e<10&&(e=10),e+c.clientWidth>screen.availWidth&&(e=screen.availWidth-c.clientWidth-20),c.style.left=e+"px";var f=(a.clientX||0)-c.offsetLeft-5;f<5?f=5:f+10+14>=c.clientWidth&&(f=c.clientWidth-10-14),addStyleToHead("div.asc-edit-menu:after{left: "+f+"px;}"),setTimeout(function(){document.getElementsByTagName("html")[0].addEventListener("click",hideEditMenu)},0)}function checkSelectedText(a){var b=document.all?document.selection.createRange().text:document.getSelection();if(b.toString().length>0){var c=b.baseNode.parentElement;c.classList.contains("asc-selectable-text")&&editMenuClick(a,c)}else hideEditMenu(a)}function addStyleToHead(a){var b=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),b.appendChild(c)}function assignMenuToButtons(){for(var a=document.getElementsByClassName("asc-edit-menu-button"),b=0;b<a.length;b++)a[b].addEventListener("click",editMenuClick)}function applyTextSelecting(){document.getElementsByClassName("asc-selectable-text").length>0&&applyDetectingSelectedText()}function applyDetectingSelectedText(){document.onmouseup=function(a){a.target.classList.contains("asc-edit-menu-button")||setTimeout(function(){checkSelectedText(a)},0)}}function applyActivityIndicators(){for(var a=document.getElementsByClassName("asc-activity-indicator"),b=0;b<a.length;b++)addBars(a[b])}function addBars(a){for(var b=document.createDocumentFragment(),c=0;c<12;c++){var d=document.createElement("div");d.classList.add("bar"+c),b.append(d)}a.appendChild(b)}function getSegmentedControls(){if(!getSegmentedControls.cached){var a=document.getElementsByClassName("asc-segmented-control");getSegmentedControls.cached=a}return getSegmentedControls.cached}function initializeSegmentsBar(){for(var a,b=[],c=getSegmentedControls(),d=0;d<c.length;d++)b.push(c[d].getAttribute("data-label")),c[d].classList.contains("active")&&(a=d);segmentsBar=document.createElement("div"),segmentsBar.classList.add("asc-segmented-bar"),b.forEach(function(a,b){var c=document.createElement("li");c.innerText=a,c.addEventListener("click",function(a){segmentClick(b)}),segmentsBar.appendChild(c)}),void 0===a&&(a=0),applySegmentedBar(),segmentClick(a)}function cleanActiveSegments(){for(var a=getSegmentedControls(),b=0;b<a.length;b++)a[b].classList.remove("active"),segmentsBar.childNodes[b].classList.remove("active")}function segmentClick(a){var b=getSegmentedControls();cleanActiveSegments(),segmentsBar.childNodes[a].classList.add("active"),b[a].classList.add("active")}function applySegmentedBar(){var a=getSegmentedControls();document.getElementsByClassName("asc-segmented-controls")[0].insertBefore(segmentsBar,a[0])}function assignErasers(){for(var a=document.getElementsByClassName("asc-eraser"),b=0;b<a.length;b++)a[b].addEventListener("mousedown",eraseContent)}function eraseContent(a){a.target.previousElementSibling.value="",setTimeout(function(){a.target.previousElementSibling.focus()},0)}function applyIcons(){for(var a=document.getElementsByTagName("input"),b=0;b<a.length;b++){var c=a[b].attributes.icon;if(c){var d=document.createElement("span");d.classList.add("fa"),d.classList.add(c.value),d.style.position="absolute",d.style.marginTop="10px",d.style.color="#B3B3B3",a[b].style.paddingLeft="20px",a[b].parentNode.insertBefore(d,a[b])}}}function getTabContents(){if(!getTabContents.cached){var a=document.getElementsByClassName("asc-tab");getTabContents.cached=a}return getTabContents.cached}function initializeTabBar(){for(var a,b=[],c=getTabContents(),d=0;d<c.length;d++){"ASC-LABEL"===c[d].children[0].tagName?(b.push(c[d].children[0]),c[d].classList.contains("active")&&(a=d)):console.error("<asc-label> should be present in <asc-tab> on the first place")}tabBar=document.createElement("div"),tabBar.classList.add("asc-tab-bar"),b.forEach(function(a,b){a.addEventListener("click",function(a){tabClick(b)}),tabBar.appendChild(a)}),void 0===a&&(a=0),applyTabBar(),tabClick(a)}function cleanActiveTab(){for(var a=getTabContents(),b=0;b<a.length;b++)a[b].classList.remove("active"),tabBar.childNodes[b].classList.remove("active")}function tabClick(a){var b=getTabContents();cleanActiveTab(),tabBar.childNodes[a].classList.add("active"),b[a].classList.add("active")}function applyTabBar(){document.getElementsByClassName("asc-tab-bar-container")[0].appendChild(tabBar)}function showAlert(a,b,c,d){var e=document.createElement("asc-dialog");e.id="sample-alert";var f=document.createElement("asc-dialog-header");f.innerText=a;var g=document.createElement("asc-dialog-text");g.innerText=b;var h=document.createElement("asc-content");h.appendChild(f),h.appendChild(g);var i=document.createElement("asc-action-button");i.innerText=c;var j=document.createAttribute("resolve");i.attributes.setNamedItem(j);var k=document.createElement("asc-action-button");k.innerText=d;var l=document.createAttribute("reject");k.attributes.setNamedItem(l);var m=document.createElement("asc-actions");m.appendChild(k),m.appendChild(i),e.appendChild(h),e.appendChild(m),document.body.appendChild(e);var n=function(){e.remove()};return showDialog(e.id,n,n)}function showDialog(a,b,c,d){var e=document.getElementById(a),f=document.createAttribute("shown");return e.attributes.setNamedItem(f),new Promise(function(a,f){e.addEventListener("click",function(a){"ASC-ACTION-BUTTON"!==a.target.tagName&&a.stopImmediatePropagation()});for(var g=function(){e.removeAttribute("shown"),j.remove(),document.body.removeEventListener("click",h)},h=function(){f(),c&&c(),g()},i=0;i<e.children.length;i++)"ASC-ACTIONS"===e.children[i].tagName&&function(d){for(var h=e.children[d].children,i=0;i<h.length;i++)!function(d){h[d].hasAttribute("reject")&&h[d].addEventListener("click",function(){f(),c&&c(),g()}),h[d].hasAttribute("resolve")&&h[d].addEventListener("click",function(){var c;if(h[d].hasAttribute("return-value-id")){var e=h[d].getAttribute("return-value-id"),f=document.getElementById(e);if(f){var i=f.value;void 0!==i&&(c=i)}}a(c),b&&b(),g()})}(i)}(i);setTimeout(function(){document.body.addEventListener("click",h)},0);var j=document.createElement("asc-backdrop");document.body.appendChild(j),d&&setTimeout(d,50)})}function ColorPicker(a,b,c){this.element=a,this.init=function(){console.time("creating color picker");var d=this.element.offsetWidth,e=document.createElement("canvas");e.height=d,e.width=d,this.canvas=e;var f=document.createElement("canvas");f.height=b.offsetHeight,f.width=b.offsetWidth,this.lineCanvas=f,b.appendChild(this.lineCanvas);var g=document.createElement("canvas");g.height=c.offsetHeight,g.width=c.offsetWidth,this.selectorCanvas=g,c.appendChild(this.selectorCanvas),this.renderColorMap(),a.appendChild(e),this.setupBindings()},this.finish=function(){console.timeEnd("creating color picker"),document.getElementById("color-loader").remove(),document.getElementById("color-hr").style.display="block",this.canvas.dispatchEvent(new Event("click"))},this.renderColorMap=function(){var a=this.canvas,b=a.getContext("2d"),c=a.width/2,d=2*Math.PI/360,e=1/c;b.clearRect(0,0,a.width,a.height);for(var f=cy=c,g=0;g<360;g+=e){var h=g*d,i=c*Math.cos(h),j=c*Math.sin(h);b.strokeStyle="hsl("+g+", 100%, 50%)",b.beginPath(),b.moveTo(c,c),b.lineTo(f+i,cy+j),b.stroke()}var k=b.createRadialGradient(f,cy,0,f,f,c);k.addColorStop(0,"white"),k.addColorStop(1,"rgba(255, 255, 255, 0)"),b.fillStyle=k,b.beginPath(),b.arc(f,cy,c,0,2*Math.PI,!0),b.closePath(),b.fill()},this.setupBindings=function(){var a=this.canvas,b=a.getContext("2d"),c=this;a.addEventListener("click",function(a){var d=a.offsetX||a.clientX-this.offsetLeft,e=a.offsetY||a.clientY-this.offsetTop,f=b.getImageData(d,e,1,1).data;c.fillSelector(f[0],f[1],f[2]);var g=c.lineCanvas.getContext("2d"),h=g.createLinearGradient(0,0,c.lineCanvas.offsetWidth,0);h.addColorStop(0,"rgb("+f[0]+" ,"+f[1]+" ,"+f[2]+")"),h.addColorStop(1,"rgb(0, 0, 0)"),g.fillStyle=h,g.fillRect(0,0,c.lineCanvas.offsetWidth,c.lineCanvas.offsetHeight)},!1),c.lineCanvas.addEventListener("click",function(a){var b=a.offsetX||a.clientX-this.offsetLeft,d=a.offsetY||a.clientY-this.offsetTop,e=c.lineCanvas.getContext("2d").getImageData(b,d,1,1).data;c.fillSelector(e[0],e[1],e[2])},!1)},this.fillSelector=function(a,b,c){var d=this.selectorCanvas.getContext("2d"),e="rgb("+a+", "+b+", "+c+")";d.fillStyle=e,d.fillRect(0,0,this.selectorCanvas.offsetWidth,this.selectorCanvas.offsetHeight),document.getElementById("selected-color-div").value=e},this.init(),this.finish()}function showColorPicker(a,b){a=a||"OK",b=b||"Cancel";var c=document.createElement("asc-dialog");c.id="sample-color-picker";var d=document.createElement("asc-dialog-header");d.innerText="Color picker";var e=document.createElement("div");e.id="color-loader",e.classList.add("asc"),e.classList.add("asc-activity-indicator"),e.classList.add("absolute-center");var f=document.createElement("asc-content");f.appendChild(d),f.appendChild(e);var g=document.createElement("div");g.classList.add("color-circle"),g.style.width="300px",g.style.cursor="crosshair",f.appendChild(g);var h=document.createElement("div");h.classList.add("color-line"),h.style.width="300px",h.style.height="50px",h.style.cursor="crosshair",f.appendChild(h);var i=document.createElement("hr");i.id="color-hr",i.style.height="2px",i.style.width="100%",i.style.border="1px solid #949494",i.style.borderBottom="none",i.style.display="none",f.appendChild(i);var j=document.createElement("div");j.classList.add("color-selector"),j.style.width="50px",j.style.height="50px",f.appendChild(j);var k=document.createElement("input");k.setAttribute("hidden",""),k.id="selected-color-div",f.appendChild(k);var l=document.createElement("asc-action-button");l.innerText=a,l.setAttribute("resolve",""),l.setAttribute("return-value-id",k.id);var m=document.createElement("asc-action-button");m.innerText=b,m.setAttribute("reject","");var n=document.createElement("asc-actions");n.appendChild(m),n.appendChild(l),c.appendChild(f),c.appendChild(n),document.body.appendChild(c),applyActivityIndicators();var o=function(){c.remove()};return showDialog(c.id,o,o,function(){new ColorPicker(g,h,j)})}hideEditMenu(),assignMenuToButtons(),applyTextSelecting(),applyActivityIndicators();var segmentsBar;initializeSegmentsBar(),assignErasers(),applyIcons();for(var searchInputs=document.getElementsByClassName("asc-search-input"),i=0;i<searchInputs.length;i++)searchInputs[i].addEventListener("focus",function(a){a.currentTarget.parentNode.classList.add("asc-clicked")}),searchInputs[i].addEventListener("blur",function(a){a.currentTarget.parentNode.classList.remove("asc-clicked")});var tabBar;initializeTabBar();for(var toolbars=document.getElementsByTagName("asc-toolbar"),i=0;i<toolbars.length;i++){var button=document.querySelector("button[data-id="+toolbars[i].id+"]");button&&function(a){var b=-a.offsetHeight+"px";a.style.bottom=b,button.addEventListener("click",function(){var c=document.createElement("asc-backdrop");setTimeout(function(){var d=function(){a.style.bottom=b,c.remove(),document.body.removeEventListener("click",d)};document.body.addEventListener("click",d)},0),document.body.appendChild(c),setTimeout(function(){a.style.bottom="0"},0)})}(toolbars[i])}for(var actionSheets=document.getElementsByTagName("asc-action-sheet"),i=0;i<actionSheets.length;i++){var button=document.querySelector("button[data-id="+actionSheets[i].id+"]");button&&function(a){for(var b=document.createElement("action-block");a.children[0];)b.appendChild(a.children[0]);a.appendChild(b);var c=document.createElement("action-block");c.classList.add("cancel-block");var d=document.createElement("action");d.innerText="Cancel",c.appendChild(d),a.appendChild(c);var e=-a.offsetHeight+"px";a.style.bottom=e,button.addEventListener("click",function(){var b=document.createElement("asc-backdrop");setTimeout(function(){var c=function(){a.style.bottom=e,b.remove(),document.body.removeEventListener("click",c)};document.body.addEventListener("click",c)},0),document.body.appendChild(b),setTimeout(function(){a.style.bottom="15px"},0)})}(actionSheets[i])}